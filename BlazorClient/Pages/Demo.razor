@using Microsoft.AspNetCore.WebUtilities

@inject NavigationManager navigationManager
@page "/demo"

<Renderer Ai="@_ai" Parameters="@_parameters" ProtoLevel="@_protoLevel" />

@code {
    private ParsedQuery _parsedQuery;
    private SimulationParameters _parameters;
    private IAi _ai;
    private ProtoLevel _protoLevel;

    protected override void OnInitialized()
    {
        var uri = navigationManager.ToAbsoluteUri(navigationManager.Uri);
        var query = QueryHelpers.ParseQuery(uri.Query);
        var parsedQuery = ParsedQuery.FromDictionary(query);

        _parameters = parsedQuery.Parameters;
        _ai = parsedQuery.CreateAi();
        _protoLevel = parsedQuery.CreateLevel();
    }
}
